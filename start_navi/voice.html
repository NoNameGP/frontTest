<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>출발지 설정 - 1-1 – 2</title>
<link rel="stylesheet" type="text/css" id="applicationStylesheet" href="voice.css"/>
<script id="applicationScript" type="text/javascript" src="voice.js"></script>
</head>
<body>
<div id="n__-_1-1__2">
	<svg class="n_29_dk">
		<radialGradient id="n_29_dk" spreadMethod="pad" x1="0" x2="0" y1="0" y2="0">
			<stop offset="0" stop-color="#363636" stop-opacity="1"></stop>
			<stop offset="1" stop-color="#191919" stop-opacity="1"></stop>
		</radialGradient>
		<ellipse id="n_29_dk" rx="15" ry="15" cx="15" cy="15">
		</ellipse>
	</svg>

	<input id="code_reddit" type="hidden" value="아래 버튼을 한번 누르고, 출발지를 말씀해주세요." autocomplete="on">
	<!-- <div onclick="g_gout()" id="n__">
		<span>아래 버튼을 한번 누르고,</span><br>
		<span>출발지를 말씀해 주세요.</span>
	</div> -->

	<div onclick="application.goToTargetView(event)" id="Icon_ionic-ios-arrow-back">
		<svg class="Icon_ionic-ios-arrow-back_dn" viewBox="11.251 6.194 13.503 23.619">
			<path id="Icon_ionic-ios-arrow-back_dn" d="M 15.32109355926514 18 L 24.2578125 9.0703125 C 24.91875076293945 8.409375190734863 24.91875076293945 7.340624809265137 24.2578125 6.686718940734863 C 23.59687423706055 6.025781631469727 22.52812576293945 6.032812595367432 21.8671875 6.686718940734863 L 11.7421875 16.8046875 C 11.10234355926514 17.44453048706055 11.08828163146973 18.47109413146973 11.69296836853027 19.13203048706055 L 21.86015701293945 29.3203125 C 22.19062614440918 29.65078163146973 22.62656402587891 29.8125 23.05546951293945 29.8125 C 23.484375 29.8125 23.92031288146973 29.65078163146973 24.25078201293945 29.3203125 C 24.91172027587891 28.65937423706055 24.91172027587891 27.59062576293945 24.25078201293945 26.93671798706055 L 15.32109355926514 18 Z">
			</path>
		</svg>
	</div>
	<div onclick="application.goToTargetView(event)" id = "new">
		<span>뒤로
			<br>가기
		</span> 
	</div>
	<!-- <div id="Text">
		<span>음성인식</span>
	</div> -->
	</div>

	<div onclick="location.href = 'voice_speech.html'" id="Icon_awesome-microphone-alt">
		<svg class="Icon_awesome-microphone-alt" viewBox="0 0 77.736 113.071">
			<path id="Icon_awesome-microphone-alt" d="M 74.20293426513672 42.40167617797852 L 70.66945648193359 42.40167617797852 C 68.71721649169922 42.40167617797852 67.135986328125 43.98290252685547 67.135986328125 45.93515014648438 L 67.135986328125 56.53556823730469 C 67.135986328125 73.05455017089844 52.89388275146484 86.30949401855469 36.04363250732422 84.66642761230469 C 21.35763549804688 83.23316192626953 10.60041904449463 70.03122711181641 10.60041904449463 55.27676773071289 L 10.60041904449463 45.93515014648438 C 10.60041904449463 43.98290252685547 9.019189834594727 42.40167617797852 7.066946029663086 42.40167617797852 L 3.533473014831543 42.40167617797852 C 1.581229209899902 42.40167617797852 0 43.98290252685547 0 45.93515014648438 L 0 54.80416488647461 C 0 74.60044860839844 14.12726593017578 92.24793243408203 33.5679931640625 94.928955078125 L 33.5679931640625 102.4707183837891 L 21.20083808898926 102.4707183837891 C 19.24859428405762 102.4707183837891 17.6673641204834 104.0519409179688 17.6673641204834 106.0041885375977 L 17.6673641204834 109.5376586914062 C 17.6673641204834 111.4899063110352 19.24859428405762 113.0711364746094 21.20083808898926 113.0711364746094 L 56.53556823730469 113.0711364746094 C 58.48781204223633 113.0711364746094 60.06903839111328 111.4899063110352 60.06903839111328 109.5376586914062 L 60.06903839111328 106.0041885375977 C 60.06903839111328 104.0519409179688 58.48781204223633 102.4707183837891 56.53556823730469 102.4707183837891 L 44.16841125488281 102.4707183837891 L 44.16841125488281 95.01287841796875 C 63.09678268432617 92.41577911376953 77.73640441894531 76.16842651367188 77.73640441894531 56.53556823730469 L 77.73640441894531 45.93515014648438 C 77.73640441894531 43.98290252685547 76.15517425537109 42.40167617797852 74.20293426513672 42.40167617797852 Z M 38.86820220947266 77.73640441894531 C 50.57724761962891 77.73640441894531 60.06903839111328 68.24461364746094 60.06903839111328 56.53556823730469 L 41.22458648681641 56.53556823730469 C 39.923828125 56.53556823730469 38.86820220947266 55.74495315551758 38.86820220947266 54.76882934570312 L 38.86820220947266 51.23535919189453 C 38.86820220947266 50.25923538208008 39.923828125 49.46862030029297 41.22458648681641 49.46862030029297 L 60.06903839111328 49.46862030029297 L 60.06903839111328 42.40167617797852 L 41.22458648681641 42.40167617797852 C 39.923828125 42.40167617797852 38.86820220947266 41.61106109619141 38.86820220947266 40.63493728637695 L 38.86820220947266 37.10146713256836 C 38.86820220947266 36.12534332275391 39.923828125 35.3347282409668 41.22458648681641 35.3347282409668 L 60.06903839111328 35.3347282409668 L 60.06903839111328 28.26778411865234 L 41.22458648681641 28.26778411865234 C 39.923828125 28.26778411865234 38.86820220947266 27.47716903686523 38.86820220947266 26.50104713439941 L 38.86820220947266 22.96757507324219 C 38.86820220947266 21.99145126342773 39.923828125 21.20083808898926 41.22458648681641 21.20083808898926 L 60.06903839111328 21.20083808898926 C 60.06903839111328 9.491791725158691 50.57724761962891 0 38.86820220947266 0 C 27.15915870666504 0 17.6673641204834 9.491791725158691 17.6673641204834 21.20083808898926 L 17.6673641204834 56.53556823730469 C 17.6673641204834 68.24461364746094 27.15915870666504 77.73640441894531 38.86820220947266 77.73640441894531 Z">
			</path>
		</svg>
	</div>

	<div onclick="location.href = 'voice_speech.html'" id="test_new">
		<span>버튼을 두 번 누르고 출발지를 말씀해 주세요</span>
	</div>

</div>

<script>
	var load_slider_status = localStorage.getItem("slider_status");
	var voices = [];
	function setVoiceList() {
		voices = window.speechSynthesis.getVoices();
	}
	setVoiceList();
	if (window.speechSynthesis.onvoiceschanged !== undefined) {
		window.speechSynthesis.onvoiceschanged = setVoiceList;
	}
	function speech(txt) {
		if(!window.speechSynthesis) {
			alert("음성 재생을 지원하지 않는 브라우저입니다. 크롬, 파이어폭스 등의 최신 브라우저를 이용하세요");
			return;
		}
		var lang = 'ko-KR';
		var utterThis = new SpeechSynthesisUtterance(txt);
		utterThis.onend = function (event) {
			console.log('end');
		};
		utterThis.onerror = function(event) {
			console.log('error', event);
		};
		var voiceFound = false;
		for(var i = 0; i < voices.length ; i++) {
			if(voices[i].lang.indexOf(lang) >= 0 || voices[i].lang.indexOf(lang.replace('-', '_')) >= 0) {
			utterThis.voice = voices[i];
			voiceFound = true;
			}
		}
		if(!voiceFound) {
			alert('voice not found');
			return;
		}
		utterThis.lang = lang;
		utterThis.pitch = 1;
		utterThis.rate = parseInt(load_slider_status);  //속도
		window.speechSynthesis.speak(utterThis);
	}
	// document.addEventListener("click", function(e) {
	//   var t = e.target;
	//   var input = t.previousElementSibling;
	//   speech(input.value);
	// });

	var load_switch_status = localStorage.getItem("switch_status");
	//console.log(load_switch_status);
	
	function g_gout(){
		var t = document.getElementById("code_reddit");

		if(load_switch_status=="on"){
			speech(t.value);
			console.log("on");
		}else{
			console.log("off");
		}
		
		
	}
	
	// window.onload = function() { 
	// 	var t = document.getElementById("code_reddit");
	// 	speech(t.value);
	//   };
	
	</script>


</body>
</html>